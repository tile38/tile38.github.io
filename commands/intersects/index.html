<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>INTERSECTS · Tile38</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Syntax"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="INTERSECTS · Tile38"/><meta property="og:type" content="website"/><meta property="og:url" content="https://tile38.com/"/><meta property="og:description" content="## Syntax"/><meta property="og:image" content="https://tile38.com/img/ogimage3.png"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon-32x32.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css"/><script type="text/javascript" src="/js/videoAutoPlay.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="Tile38"/><h2 class="headerTitleWithLogo">Tile38</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/commands" target="_self" class="">Commands</a></li><li class=""><a href="/topics/installation" target="_self" class="">Documentation</a></li><li class=""><a href="https://github.com/tidwall/tile38" target="_self" class="">GitHub</a></li><li class=""><a href="/topics/installation" target="_self" class="tile38NavButton">Get Tile38</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Geofences</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/topics/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/topics/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/topics/object-types">Object Types</a></li><li class="navListItem"><a class="navItem" href="/topics/command-line-interface">Command Line Interface</a></li><li class="navListItem"><a class="navItem" href="/topics/network-protocols">Network Protocols</a></li><li class="navListItem"><a class="navItem" href="/topics/client-libraries">Client Libraries</a></li><li class="navListItem"><a class="navItem" href="/topics/replication">Replication</a></li><li class="navListItem"><a class="navItem" href="/topics/filter-expressions">Filter Expressions</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/commands/">Commands</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Geofences</h3><ul class=""><li class="navListItem"><a class="navItem" href="/topics/geofencing">Geofencing</a></li><li class="navListItem"><a class="navItem" href="/topics/roaming-geofences">Roaming Geofences</a></li><li class="navListItem hide"><a class="navItem" href="/commands/aof">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/aofmd5">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/aofshrink">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/auth">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/bounds">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/chans">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/config-get">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/config-rewrite">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/config-set">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/del">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/delchan">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/delhook">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/drop">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/eval">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/evalna">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/evalnasha">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/evalro">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/evalrosha">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/evalsha">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/expire">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/flushdb">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/follow">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/fset">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/gc">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/get">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/hooks">__no_label</a></li><li class="navListItem hide navListItemActive"><a class="navItem" href="/commands/intersects">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/jdel">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/jget">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/jset">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/keys">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/nearby">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/output">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/pdel">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/pdelchan">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/pdelhook">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/persist">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/ping">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/psubscribe">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/quit">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/readonly">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/rename">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/renamenx">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/scan">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/script-exists">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/script-flush">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/script-load">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/search">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/server">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/set">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/setchan">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/sethook">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/stats">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/subscribe">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/test">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/timeout">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/ttl">__no_label</a></li><li class="navListItem hide"><a class="navItem" href="/commands/within">__no_label</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');

              /*
                MELBANIA: hide tocToggler if there are no onPageNav toc-headings
              */
              if (!headings) {
                let tocToggler = document.querySelector("#tocToggler");
                tocToggler.classList.add('hide');
              }
              /* END melbania */

              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);

                  /*
                    MELBANIA: hide tocToggler if navToggler is active, unhide 
                    otherwise; only engage hide/unhide toggling if there are toc-headings
                  */
                  if (target.classList.value.includes("docsNavContainer")) {
                    let tocHeadings = document.querySelector('.toc-headings');
                    let tocToggler = document.querySelector('#tocToggler');
                    
                    if (tocHeadings) {
                      tocToggler.classList.toggle('hide');
                    }
                  }
                  /* END melbania */
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/tile38/tile38.github.io/edit/master/docs/commands/intersects.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">INTERSECTS</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="syntax"></a><a href="#syntax" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntax</h2>
<p><strong>INTERSECTS key [CURSOR start] [BUFFER meters] [LIMIT count] [MATCH pattern] [WHERE field min max ...] [WHEREIN field count value [value...] ...] [WHEREEVAL script numargs arg [arg...] ...] [WHEREEVALSHA sha1 numargs arg [arg...] ...] [CLIP] [NOFIELDS] [FENCE] [DETECT what] [COMMANDS which] [COUNT|IDS|OBJECTS|POINTS|BOUNDS|(HASHES precision)] (GET key id)|(BOUNDS minlat minlon maxlat maxlon)|(OBJECT geojson)|(CIRCLE lat lon meters)|(TILE x y z)|(QUADKEY quadkey)|(HASH geohash)|(SECTOR lat lon meters bearing1 bearing2)</strong></p>
<h2><a class="anchor" aria-hidden="true" id="description"></a><a href="#description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h2>
<p>INTERSECTS searches a collection for objects that intersect a specified bounding area.</p>
<p><a href="/commands/within">WITHIN</a> and <a href="/commands/intersects">INTERSECTS</a> have identical syntax. The only difference between the two is that WITHIN returns objects that are <em>contained</em> inside an area, and intersects returns objects that are <em>contained or intersects</em> an area.</p>
<p>This command has many options, but at it’s most simplest it may appear like.</p>
<pre><code class="hljs css language-tile38-cli"><span class="hljs-command">INTERSECTS</span> fleet <span class="hljs-command">BOUNDS</span> <span class="hljs-number">33.462 </span><span class="hljs-neg-number">-112.268</span> <span class="hljs-number">33.491 </span><span class="hljs-neg-number">-112.245</span>
</code></pre>
<p>Above is a search around the rectangle with the southwestern point <code>33.462,-112.268</code> and the northeastern point <code>33.491,-112.245</code>. A list of all objects that intersect the rectangle are returned.</p>
<p><a name="search-options"></a></p>
<h2><a class="anchor" aria-hidden="true" id="search-options"></a><a href="#search-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Search Options</h2>
<p>Below is a complete list of search options. These options are shared by the <a href="/commands/nearby">NEARBY</a>, <a href="/commands/within">WITHIN</a>, <a href="/commands/intersects">INTERSECTS</a>, and <a href="/commands/scan">SCAN</a> commands.</p>
<h3><a class="anchor" aria-hidden="true" id="fence"></a><a href="#fence" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FENCE</h3>
<p>FENCE opens a <a href="/topics/geofencing">Geofence</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="detect"></a><a href="#detect" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DETECT</h3>
<p>DETECT is available when the FENCE options is specified. It allows for filtering out geofence notifications based on the type. For more information see the <a href="/topics/geofencing#detect">Geofence</a> topic.</p>
<h3><a class="anchor" aria-hidden="true" id="where"></a><a href="#where" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WHERE</h3>
<p>WHERE allows for filtering out results based on <a href="/commands/set#fields">field</a> values and object attributes.</p>
<h4><a class="anchor" aria-hidden="true" id="field-values"></a><a href="#field-values" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Field values</h4>
<p>For example:</p>
<pre><code class="hljs css language-tile38-cli"><span class="hljs-command">NEARBY</span> fleet <span class="hljs-command">WHERE</span> speed <span class="hljs-number">70 </span>+inf <span class="hljs-command">POINT</span> <span class="hljs-number">33.462 </span><span class="hljs-neg-number">-112.268</span> <span class="hljs-number">6000
</span></code></pre>
<p>will return only the objects in the <strong>fleet</strong> collection that are within the 6 km radius <strong>and</strong> have a field named <code>speed</code> that is greater than <code>70</code>. <br><br>Multiple WHEREs are concatenated as <strong>and</strong> clauses. <code>WHERE speed 70 +inf WHERE age -inf 24</code> would be interpreted as <em>speed is over 70 <b>and</b> age is less than 24.</em><br><br>The default value for a field is always <code>0</code>. Thus if you do a WHERE on the field <code>speed</code> and an object does not have that field set, the server will pretend that the object does and that the value is Zero.</p>
<p>As of 1.30.0 Tile38 supports more elaborate <a href="/topics/filter-expressions">filter expressions</a>.</p>
<pre><code class="hljs css language-tile38-cli"><span class="hljs-command">SET</span> fleet truck2 <span class="hljs-command">FIELD</span> info '<span class="hljs-geojson">{"speed":61,"name":"Tom"}</span>' <span class="hljs-command">POINT</span> <span class="hljs-neg-number">-112</span> <span class="hljs-number">33
</span>&gt;&gt; <span class="hljs-geojson">{"ok":true}</span>

<span class="hljs-command">SCAN</span> fleet <span class="hljs-command">WHERE</span> 'info.speed &gt; 45' <span class="hljs-command">COUNT</span>
&gt;&gt; <span class="hljs-geojson">{"ok":true,"count":1,"cursor":0}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="object-attributes"></a><a href="#object-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Object attributes</h4>
<p>Using <a href="https://github.com/tidwall/gjson">gjson</a>, as of 1.30.0 Tile38 objects can be filtered by object attributes.</p>
<pre><code class="hljs css language-tile38-cli"><span class="hljs-comment"># add a complex object
</span><span class="hljs-command">SET</span> fleet truck <span class="hljs-command">OBJECT</span> '<span class="hljs-geojson">{"type":"Feature","geometry":{"type":"Point","coordinates":[-112,33]}</span>,"properties":<span class="hljs-geojson">{"speed":50}</span>,"asdf":"Adsf"}'
&gt;&gt; <span class="hljs-geojson">{"ok":true}</span>

<span class="hljs-comment"># scan fleet collection and filter
</span><span class="hljs-command">SCAN</span> fleet <span class="hljs-command">WHERE</span> properties.speed &gt; <span class="hljs-number">49 </span><span class="hljs-command">IDS</span>
&gt;&gt; <span class="hljs-geojson">{"ok":true,"ids":["truck"],"count":1,"cursor":0}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="wherein"></a><a href="#wherein" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WHEREIN</h3>
<p>WHEREIN is similar to WHERE except that it checks whether the object's <a href="/commands/set#fields">field</a> value is in a given list. For example<br><code>nearby fleet WHEREIN wheels 3 14 18 22 point 33.462 -112.268 6000</code> will return only the objects in the 'fleet' collection that are within the 6 km radius <strong>and</strong> have a field named <code>wheels</code> that is either <code>14</code> or <code>18</code> or <code>22</code>. <br><br>Multiple WHEREINs are concatenated as <strong>and</strong> clauses. <code>WHEREIN doors 2 2 5 WHEREIN wheels 3 14 18 22</code> would be interpreted as <em>doors is either 2 or 5 <b>and</b> wheels is either 14 or 18 or 22.</em><br><br>The default value for a field is always <code>0</code>. Thus if you do a WHEREIN on the field <code>wheels</code> and an object does not have that field set, the server will pretend that the object does and that the value is Zero. <br><br><strong>Note</strong>: immediately following the <strong>WHEREIN</strong> token must be an integer specifying the number of values specified in this clause.</p>
<h3><a class="anchor" aria-hidden="true" id="whereeval"></a><a href="#whereeval" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WHEREEVAL</h3>
<p>Similar to WHERE except that matching decision is made by Lua script. For example <br><code>nearby fleet whereeval &quot;return FIELDS.wheels &gt; ARGV[1] or (FIELDS.length * FIELDS.width) &gt; ARGV[2]&quot; 2 8 120 point 33.462 -112.268 6000</code> will return only the objects in the <code>fleet</code> collection that are within the 6km radius <strong>and</strong> have a field named <code>wheels</code> that is above <code>8</code>, or have <code>length</code> and <code>width</code> whose product is greater than <code>120</code>. <br>Multiple WHEREEVALs are concatenated as <strong>and</strong> clauses. See <a href="/commands/eval">EVAL</a> command for more details. Note that, unlike the EVAL command, WHEREVAL Lua environment (1) does not have KEYS global, and (2) has the FIELDS global with the Lua table of the iterated object's fields.</p>
<h3><a class="anchor" aria-hidden="true" id="match"></a><a href="#match" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MATCH</h3>
<p>MATCH is similar to WHERE except that it works on the object id instead of fields.<br><code>nearby fleet match truck* point 33.462 -112.268 6000</code> will return only the objects in the 'fleet' collection that are within the 6 km radius <strong>and</strong> have an object id that starts with <code>truck</code>. There can be multiple MATCH options in a single search. The MATCH value is a simple <a href="https://en.wikipedia.org/wiki/Glob_(programming)">glob pattern</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="cursor"></a><a href="#cursor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CURSOR</h3>
<p>CURSOR is used to iterate though many objects from the search results. An iteration begins when the CURSOR is set to Zero or not included with the request, and completes when the cursor returned by the server is Zero.</p>
<h3><a class="anchor" aria-hidden="true" id="nofields"></a><a href="#nofields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>NOFIELDS</h3>
<p>NOFIELDS tells the server that you do not want field values returned with the search results.</p>
<h3><a class="anchor" aria-hidden="true" id="clip"></a><a href="#clip" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CLIP</h3>
<p>CLIP tells the server to clip intersecting objects by the bounding box area of the search. It can only be used with these area formats: BOUNDS, TILE, QUADKEY, HASH.</p>
<h3><a class="anchor" aria-hidden="true" id="limit"></a><a href="#limit" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LIMIT</h3>
<p>LIMIT can be used to limit the number of objects returned for a single search request. If not provide, the default is 100.</p>
<h3><a class="anchor" aria-hidden="true" id="buffer"></a><a href="#buffer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BUFFER</h3>
<p>Apply a BUFFER around <a href="#area-formats">Area Formats</a> to increase the search area by x meters in <a href="/commands/within">WITHIN</a> and <a href="/commands/intersects">INTERSECTS</a> searches.</p>
<p><a name="output-formats"></a></p>
<h2><a class="anchor" aria-hidden="true" id="output-formats"></a><a href="#output-formats" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output Formats</h2>
<p>Below is a complete list of output formats. These formats are shared by the <a href="/commands/nearby">NEARBY</a>, <a href="/commands/within">WITHIN</a>, <a href="/commands/intersects">INTERSECTS</a>, and <a href="/commands/scan">SCAN</a> commands.</p>
<p><strong>COUNT</strong> - Total object count sent in the response. When LIMIT or CURSOR are provided, COUNT returns the number of results that would otherwise be sent as objects. When LIMIT is not specified, COUNT totals up all items starting from provided CURSOR position (or zero if a cursor is omitted). <em><code>LIMIT</code> and <code>CURSOR</code> options are ignored</em></p>
<p><strong>IDS</strong> - A list of IDs belonging to the key. Will not return the objects.</p>
<p><strong>OBJECTS</strong> - A list of <a href="http://geojson.org/">GeoJSON</a> objects.</p>
<p><strong>POINTS</strong> - A list of standard latitude, longitude points.</p>
<p><strong>BOUNDS</strong> - A list of <a href="https://en.wikipedia.org/wiki/Minimum_bounding_rectangle">minimum bounding rectangle</a>.</p>
<p><strong>HASHES</strong> - A list of <a href="https://en.wikipedia.org/wiki/Geohash">Geohash</a>. <em>Requires a precision of 1 to 22.</em></p>
<p><a name="area-formats"></a></p>
<h2><a class="anchor" aria-hidden="true" id="area-formats"></a><a href="#area-formats" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Area Formats</h2>
<p>Below is a complete list of area formats. These formats are shared by the <a href="/commands/within">WITHIN</a> and <a href="/commands/intersects">INTERSECTS</a> commands.</p>
<p><strong>GET</strong> - Any object that already exists in the database. For example,</p>
<pre><code class="hljs css language-tile38-cli"><span class="hljs-command">WITHIN</span> poi <span class="hljs-command">GET</span> cities tempe
</code></pre>
<p>Might be used to search for all object in the <code>poi</code> key that are within the object <code>tempe</code> that belongs to the key <code>cities</code>. Of course, the <code>cities/tempe</code> object must exist in the database.</p>
<p><strong>BOUNDS</strong> - A <a href="/topics/object-types#bounds">minimum bounding rectangle</a>.</p>
<p><strong>OBJECT</strong> - A <a href="/topics/object-types#geojson">GeoJSON</a> object.</p>
<p><strong>CIRCLE</strong> - A circle with the specified center and radius.</p>
<p><strong>TILE</strong> - An <a href="/topics/object-types#xyz-tile">XYZ Tile</a>.</p>
<p><strong>QUADKEY</strong> - A <a href="/topics/object-types#quadkey">QuadKey</a>.</p>
<p><strong>HASH</strong> - A <a href="/topics/object-types#geohash">Geohash</a>.</p>
<p><strong>SECTOR</strong> - A <a href="/topics/object-types#sector">Sector</a>.</p>
<p><a name="fields"></a></p>
<h2><a class="anchor" aria-hidden="true" id="fields"></a><a href="#fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fields</h2>
<p>The object <a href="/commands/set#fields">field</a> values are grouped together in a list per object.
Due to the way Tile38 organizes field memory, it's possible to see zero values for fields
that have not been set. <strong>It's recommended to treat all nonexistent or omitted fields as
having the value of zero.</strong> Check out this <a href="https://github.com/tidwall/tile38/issues/169#issuecomment-295280587">Github issue</a>
for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="related-commands"></a><a href="#related-commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Related Commands</h2>
<p><strong><a href="/commands/intersects">INTERSECTS</a></strong><br>
<a href="/commands/nearby">NEARBY</a><br>
<a href="/commands/scan">SCAN</a><br>
<a href="/commands/search">SEARCH</a><br>
<a href="/commands/within">WITHIN</a><br></p>
</span></div></article></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#syntax">Syntax</a></li><li><a href="#description">Description</a></li><li><a href="#search-options">Search Options</a><ul class="toc-headings"><li><a href="#fence">FENCE</a></li><li><a href="#detect">DETECT</a></li><li><a href="#where">WHERE</a></li><li><a href="#wherein">WHEREIN</a></li><li><a href="#whereeval">WHEREEVAL</a></li><li><a href="#match">MATCH</a></li><li><a href="#cursor">CURSOR</a></li><li><a href="#nofields">NOFIELDS</a></li><li><a href="#clip">CLIP</a></li><li><a href="#limit">LIMIT</a></li><li><a href="#buffer">BUFFER</a></li></ul></li><li><a href="#output-formats">Output Formats</a></li><li><a href="#area-formats">Area Formats</a></li><li><a href="#fields">Fields</a></li><li><a href="#related-commands">Related Commands</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="legal"><section class="copyright">Copyright © 2024 Tile38, LLC<a href="/license">License</a></section></div><div class="docs"><h5>Docs</h5><a href="/topics/installation">Getting Started</a><a href="/topics/geofencing">Geofences</a><a href="/commands/">Commands</a></div><div class="community"><h5>Community</h5><a href="https://stackoverflow.com/search?q=tile38" rel="noreferrer noopener">Stack Overflow</a><a href="https://tile38.com/slack/">Slack</a><a href="https://twitter.com/tile38db" rel="noreferrer noopener">Twitter</a></div><div class="more"><h5>More</h5><a href="https://github.com/tidwall/tile38">GitHub</a><a class="github-button" href="https://github.com/tidwall/tile38" data-icon="octicon-star" data-count-href="/tidwall/tile38/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>